/*
 * check_prime.cxx
 * 
 * Copyright 2023 Mike <mike@pop-os>
 * 
 */


#include <iostream>
#include <cstdint>
#include <vector>

using namespace std;

int main(int argc, char **argv)
{
	uint64_t a,  a4, a5, a6, a7, idx=3, a3=2359;
	uint64_t aRef;
	const uint64_t iRef = 1000;
	
	vector<uint64_t> primes = 
{100996487,100996499,100996529,100996583,100996607,100996619,100996639,100996699,100996759,100996769,
100996771,100996781,100996783,100996787,100996823,100996871,100996901,100996921,100996927,100996943,
100996969,100996993,100997009,100997023,100997041,100997047,100997059,100997069,100997081,100997107,
100997123,100997137,100997147,100997159,100997189,100997191,100997213,100997231,100997249,100997257,
100997291,100997297,100997311,100997327,100997333,100997387,100997399,100997419,100997437,100997441,
100997453,100997509,100997513,100997537,100997543,100997569,100997581,100997587,100997591,100997593,
100997599,100997647,100997653,100997671,100997693,100997717,100997723,100997747,100997773,100997797,
100997821,100997837,100997839,100997843,100997849,100997857,100997891,100997921,100997929,100997957,
100997959,100997993,100997999,100998017,100998041,100998043,100998059,100998067,100998089,100998101,
100998109,100998113,100998119,100998137,100998143,100998151,100998169,100998193,100998203,100998299,
100998311,100998323,100998349,100998353,100998367,100998379,100998397,100998407,100998431,100998439,
100998461,100998463,100998473,100998481,100998487,100998517,100998533,100998559,100998613,100998617,
100998647,100998659,100998671,100998673,100998679,100998697,100998731,100998739,100998757,100998763,
100998809,100998811,100998827,100998839,100998841,100998871,100998901,100998907,100998913,100998923,
100998971,100998983,100999001,100999007,100999013,100999033,100999037,100999039,100999109,100999111,
100999123,100999169,100999181,100999189,100999229,100999243,100999259,100999289,100999309,100999313,
100999319,100999361,100999387,100999399,100999403,100999411,100999433,100999471,100999477,100999487,
100999511,100999517,100999537,100999541,100999543,100999597,100999631,100999651,100999709,100999711,
100999729,100999741,100999777,100999817,100999849,100999861,100999867,100999879,100999883,100999889,
100999897,100999901,100999903,100999919,100999939,100999949,100999979,100999981,100999993,101000023};
	
	for(uint64_t p : primes) {
	
		//~ a4 = (6*a3*a3 + 10*a3 + 3) % p;
		//~ a5 = (6*a4*a4 + 10*a4 + 3) % p;
		//~ a6 = (6*a5*a5 + 10*a5 + 3) % p;
		//~ a7 = (6*a6*a6 + 10*a6 + 3) % p;
		//~ uint64_t a = a6; idx = 6;
		//~ // cout << "Searching against " << a6 << " " << endl;
		
		cout << "Modulus:" << p << endl;
		
		// Move fwd to a[iRef]
		a = a3; idx = 3;	
		do {
			a = (6*a*a + 10*a + 3) % p;
			idx += 1;
		}while(idx != iRef);
		
		aRef = a;	//Reference value
		
		// Save first map entry here - map.emplace(1000, aRef)
		
		do {
			a = (6*a*a + 10*a + 3) % p;
			idx += 1;
		}while((a != aRef) && (idx != p));
		
		if(a == aRef) {
			// cout << "Search succeded. " << a << " " << aRef << " idx:" << idx << endl;
		}
		
		if(idx >= p) {
			cout << "\n\t\tSearch overrun p:" << p << " no match found." << endl;		
		}
	}
	
	return 0;
}

